# Caddy Configuration for PersonalAccounter
# This is the default configuration for development/manual setup
# The setup.sh script will replace this with domain-specific configuration

{
    admin off
    local_certs
}

# HTTP server - works on both ports 80 and 8080
:80, :8080 {
    root * /var/www/html/public
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        -Server
    }
    
    # Enable file server
    file_server
    
    # Enable gzip compression
    encode gzip
    
    # PHP handling
    php_fastcgi app:9000
}

# HTTPS server - default port 443 and 8443 with self-signed certificate
:443, :8443 {
    root * /var/www/html/public
    
    # Self-signed TLS certificate for development/testing
    # Note: setup.sh will configure proper Let's Encrypt or domain-specific SSL
    tls internal
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        -Server
    }
    
    # Enable file server
    file_server
    
    # Enable gzip compression
    encode gzip
    
    # PHP handling
    php_fastcgi app:9000
}
